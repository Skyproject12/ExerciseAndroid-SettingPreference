package com.example.sharepreference;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.text.TextUtils;
import android.util.Patterns;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.Toast;

public class FormUserMainActivity extends AppCompatActivity implements View.OnClickListener {

    EditText inputNama;
    EditText inputEmail;
    EditText inputPhone;
    EditText inputAge;
    RadioGroup love;
    RadioButton radioYa;
    RadioButton radioNo;
    Button buttonSave;

    public static String EXTRA_TYPE_FORM= "extra_type_form";
    public static int REQUEST_CODE= 100;
    public static int TYPE_END= 1;
    public static int TYPE_EDIT= 2;
    public static String FIELD_REQUIRED="required file";
    int formType;

    UserModel userModel;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_form_user_main);
        inputNama= findViewById(R.id.input_name);
        inputEmail= findViewById(R.id.input_email);
        inputAge= findViewById(R.id.input_age);
        inputPhone= findViewById(R.id.input_phone);
        radioYa= findViewById(R.id.radio_ya);
        love= findViewById(R.id.radio_love);
        radioNo= findViewById(R.id.radio_no);
        Intent intent= getIntent();
        userModel= intent.getParcelableExtra("USER");
        buttonSave= findViewById(R.id.button_save);
        buttonSave.setOnClickListener(this);
        formType= getIntent().getIntExtra(EXTRA_TYPE_FORM, 0);
    }

    @Override
    public void onClick(View v) {
        if(v.getId() == R.id.button_save){
            String nama= inputNama.getText().toString().trim();
            String email= inputEmail.getText().toString().trim();
            String age= inputAge.getText().toString().trim();
            String phoneNo= inputPhone.getText().toString().trim();
            boolean loves= love.getCheckedRadioButtonId() == R.id.radio_ya;
            if(TextUtils.isEmpty(nama)){
                inputNama.setError(FIELD_REQUIRED);
                return;
            }
            if(TextUtils.isEmpty(email)){
                inputEmail.setError(FIELD_REQUIRED);
                return;
            }
            if(!isValidEmail(email)){
                inputEmail.setError(FIELD_EMAIL_NOT_VALID);
                return;
            }
            if(TextUtils.isEmpty(age)){
                inputAge.setError(FIELD_REQUIRED);
                return;
            }
            if(TextUtils.isEmpty(phoneNo)){
                inputPhone.setError(FIELD_REQUIRED);
                return;
            }
            if(!TextUtils.isDigitsOnly(phoneNo)){
                